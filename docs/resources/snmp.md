---
page_title: "mikrotik_snmp Resource - terraform-provider-mikrotik"
subcategory: "Monitoring"
description: |-
  Manages SNMP (Simple Network Management Protocol) configuration for network monitoring and management.
---

# mikrotik_snmp (Resource)

Manages SNMP configuration on MikroTik RouterOS devices. This is a **singleton resource** - only one SNMP configuration exists per router.

SNMP enables network monitoring systems (Zabbix, PRTG, LibreNMS, Nagios, Observium) to collect metrics, receive traps, and manage devices remotely.

## Features

- **SNMPv1/v2c Support**: Community-based authentication
- **SNMP Traps**: Send notifications to monitoring systems
- **System Information**: Configure contact and location (sysContact, sysLocation)
- **Trap Filtering**: Select specific trap generators
- **Singleton Pattern**: Only one configuration per device

## Example Usage

```terraform
# Basic SNMP v2c configuration
resource "mikrotik_snmp" "basic" {
  enabled  = true
  contact  = "noc@company.com"
  location = "Datacenter A, Rack 12"
}

# SNMP with trap target (Zabbix)
resource "mikrotik_snmp" "zabbix" {
  enabled        = true
  contact        = "zabbix@company.com"
  location       = "Edge Router - Site 1"
  trap_version   = "2"
  trap_community = "traps"
  trap_target    = "192.168.1.50"  # Zabbix server
  trap_generators = "interfaces,temp-exception"
}

# PRTG Network Monitor
resource "mikrotik_snmp" "prtg" {
  enabled        = true
  contact        = "noc@company.com"
  location       = "Branch Office - London"
  trap_version   = "2"
  trap_community = "prtg-traps"
  trap_target    = "192.168.100.10"
}

# LibreNMS monitoring
resource "mikrotik_snmp" "librenms" {
  enabled         = true
  contact         = "netops@company.com"
  location        = "Core Router - DC1"
  trap_version    = "2"
  trap_community  = "librenms"
  trap_target     = "10.20.30.40"
  trap_generators = "interfaces,system"
}

# Critical events only
resource "mikrotik_snmp" "critical_only" {
  enabled         = true
  contact         = "noc@company.com"
  location        = "Critical Infrastructure"
  trap_version    = "2"
  trap_community  = "critical"
  trap_target     = "192.168.1.50"
  trap_generators = "temp-exception,voltage-exception,psu-fail"
}

# Disabled SNMP
resource "mikrotik_snmp" "disabled" {
  enabled = false
}
```

## Argument Reference

- `enabled` - (Optional) Enable SNMP service. Default: `false`.
- `contact` - (Optional) System contact information (sysContact). Examples: `"noc@company.com"`, `"Network Operations Center"`.
- `location` - (Optional) System location (sysLocation). Examples: `"Datacenter A, Rack 12"`, `"Building 5, Floor 3"`.
- `trap_version` - (Optional) SNMP trap version: `"1"` or `"2"`. Default: `"1"`.
- `trap_community` - (Optional, Sensitive) SNMP community string for traps. Default: `"public"`.
- `trap_target` - (Optional) Trap target IP address or hostname. Empty = no traps sent.
- `trap_generators` - (Optional) Comma-separated list of trap generators. Empty = all generators.

### Available Trap Generators

- `interfaces` - Interface up/down events
- `system` - System events (reboot, config changes)
- `temp-exception` - Temperature threshold exceeded
- `voltage-exception` - Voltage out of range
- `psu-fail` - Power supply failure
- `fan-fail` - Fan failure
- `hw-fail` - Hardware failure

## Attribute Reference

- `id` - Always `"*0"` (singleton resource).
- `engine_id` - (Computed) SNMPv3 engine ID. Auto-generated by RouterOS. Read-only.

## Import

```shell
# SNMP configuration can be imported using "*0"
terraform import mikrotik_snmp.example "*0"
```

## Common Patterns

### Zabbix Monitoring

```terraform
resource "mikrotik_snmp" "zabbix" {
  enabled         = true
  contact         = "monitoring@company.com"
  location        = "Production Network"
  trap_version    = "2"
  trap_community  = "zabbix"
  trap_target     = "10.0.100.10"
  trap_generators = "interfaces,system,temp-exception"
}

resource "mikrotik_snmp_community" "zabbix" {
  name        = "zabbix"
  read_access = true
  address     = "10.0.100.0/24"
}
```

### PRTG Network Monitor

```terraform
resource "mikrotik_snmp" "prtg" {
  enabled        = true
  contact        = "noc@company.com"
  location       = "Branch Office"
  trap_version   = "2"
  trap_community = "prtg"
  trap_target    = "192.168.100.10"
}

resource "mikrotik_snmp_community" "prtg" {
  name        = "prtg"
  read_access = true
  address     = "192.168.100.10"
}
```

### LibreNMS Monitoring

```terraform
resource "mikrotik_snmp" "librenms" {
  enabled         = true
  contact         = "netops@company.com"
  location        = "Core Router"
  trap_version    = "2"
  trap_community  = "librenms"
  trap_target     = "10.20.30.40"
  trap_generators = "interfaces,system"
}

resource "mikrotik_snmp_community" "librenms" {
  name        = "librenms"
  read_access = true
  address     = "10.20.30.0/24"
}
```

### Multi-Site with Central Monitoring

```terraform
# Branch site router
resource "mikrotik_snmp" "branch" {
  enabled        = true
  contact        = "support@company.com"
  location       = "Branch Office - New York"
  trap_version   = "2"
  trap_community = "traps"
  trap_target    = "203.0.113.50"  # Central monitoring via internet
}

resource "mikrotik_snmp_community" "central" {
  name        = "monitoring"
  read_access = true
  address     = "203.0.113.0/24"  # Central monitoring subnet
}
```

### Critical Infrastructure Monitoring

```terraform
resource "mikrotik_snmp" "critical" {
  enabled         = true
  contact         = "noc@enterprise.com"
  location        = "Data Center - Primary"
  trap_version    = "2"
  trap_community  = "critical"
  trap_target     = "10.0.1.100"
  trap_generators = "temp-exception,voltage-exception,psu-fail,fan-fail"
}
```

## Best Practices

1. **Use SNMPv2c**: More efficient than v1, better error handling
2. **Restrict Communities**: Use `mikrotik_snmp_community` with IP restrictions
3. **Filter Trap Generators**: Only send relevant traps to reduce noise
4. **Secure Community Strings**: Use strong, unique community names
5. **Document Locations**: Use descriptive `location` for asset tracking
6. **Set Correct Contact**: Ensure `contact` reaches appropriate team
7. **Test Trap Delivery**: Verify monitoring system receives traps
8. **Monitor SNMP Performance**: SNMP queries impact router CPU

## Security Considerations

- **Community Strings**: Sensitive - transmitted in plaintext
- **IP Restrictions**: Always use `address` in `mikrotik_snmp_community`
- **Write Access**: Rarely needed, prefer read-only communities
- **SNMPv3**: Recommended for encrypted monitoring (use `mikrotik_snmp_user`)
- **Management VLAN**: Isolate SNMP traffic to management network
- **Firewall Rules**: Restrict SNMP access (UDP/161, UDP/162)

## Troubleshooting

**SNMP not responding:**
- Verify `enabled = true`
- Check firewall rules (UDP/161)
- Verify community configuration
- Test with `snmpwalk` from monitoring server

**Traps not received:**
- Verify `trap_target` is reachable
- Check `trap_community` matches receiver
- Verify firewall allows UDP/162
- Check `trap_generators` includes desired events

**Performance issues:**
- Reduce SNMP polling frequency
- Use specific OIDs instead of walks
- Limit number of monitoring systems
- Check CPU usage during SNMP queries

**Access denied:**
- Verify community name matches
- Check IP `address` restriction
- Ensure `read_access = true`
- Verify RouterOS user permissions

## Notes

- Singleton resource: Only one SNMP configuration per router
- Changes require `enabled = true` to take effect
- `engine_id` is auto-generated and read-only
- Deleting resource disables SNMP (sets `enabled = false`)
- Communities managed separately via `mikrotik_snmp_community`
- SNMPv3 users managed via `mikrotik_snmp_user` (if available)

## See Also

- [`mikrotik_snmp_community`](snmp_community.md) - Manage SNMP communities
- [MikroTik SNMP Documentation](https://help.mikrotik.com/docs/display/ROS/SNMP)
